{
  "source_file_path_relative_to_docusaurus_root": "docs/simulate-dns-chaos-on-kubernetes.md",
  "source_file_content_hash": "51596012257f124b087c49337decc2bac64f4264cb7fbe3936f39c0d1fac15a7",
  "segments": [
    {
      "segment_id": "58cfcc64",
      "source_content": "---\ntitle: Simulate DNS Faults\n---",
      "source_content_hash": "c06cb7b9018028f82e16f0765210865b962baff20df0d05fdc6068d77d7910ed",
      "node_type": "yaml",
      "translatable": false,
      "translations": {
        "ja": "@@untranslatable_placeholder_58cfcc64"
      }
    },
    {
      "segment_id": "7335511f",
      "source_content": "import PickHelmVersion from '@site/src/components/PickHelmVersion'",
      "source_content_hash": "753aee644dbd2a4b70a118018b50ec80427523e751a14d470e7956678fd8cb94",
      "node_type": "mdxjsEsm",
      "translatable": false,
      "translations": {
        "ja": "@@untranslatable_placeholder_7335511f"
      }
    },
    {
      "segment_id": "6ef78e84",
      "source_content": "This document describes how to create DNSChaos experiments in Chaos Mesh to simulate DNS faults.",
      "source_content_hash": "d4412a51b434a192b4df9aad0e8e7afdbd355d82f4f353ad7bae11e72428fc81",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "ja": "このドキュメントでは、Chaos MeshでDNS障害をシミュレートするDNSChaos実験の作成方法について説明します。"
      }
    },
    {
      "segment_id": "0d5e1c45",
      "source_content": ":::info\n\nTo simulate DNS faults, you need to deploy a special DNS service called Chaos DNS Server.\n\nAfter `v2.6`, Chaos Mesh will deploy Chaos DNS Server by default. If you don't need to simulate DNS faults, you can set `dnsServer.create` to `false` when installing Chaos Mesh:\n\n<PickHelmVersion>{`helm install chaos-mesh chaos-mesh/chaos-mesh --namespace=chaos-mesh --version latest --set dnsServer.create=false`}</PickHelmVersion>\n\n:::",
      "source_content_hash": "f8d2f2ab5f646217090bb0d0ac2f2e4b2cbee7c7b74b2005bd7ec745646aa698",
      "node_type": "containerDirective",
      "translatable": true,
      "translations": {
        "ja": ":::info\n\nDNS障害をシミュレートするには、Chaos DNS Serverと呼ばれる特別なDNSサービスをデプロイする必要があります。\n\n`v2.6`以降、Chaos MeshはデフォルトでChaos DNS Serverをデプロイします。DNS障害のシミュレーションが必要ない場合は、Chaos Meshのインストール時に`dnsServer.create`を`false`に設定できます：\n\n<PickHelmVersion>{`helm install chaos-mesh chaos-mesh/chaos-mesh --namespace=chaos-mesh --version latest --set dnsServer.create=false`}</PickHelmVersion>\n\n:::"
      }
    },
    {
      "segment_id": "aee0e40d",
      "source_content": "## DNSChaos Introduction",
      "source_content_hash": "4a99a04a9ed6e10c019242b02df19e78fa5231a6eadb8872fb8d9bd7df1bd6b1",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "ja": "## DNSChaosの概要"
      }
    },
    {
      "segment_id": "f5f6d2ce",
      "source_content": "DNSChaos is used to simulate wrong DNS responses. For example, DNSChaos can return an error or return a random IP address when receiving a DNS request.",
      "source_content_hash": "4c42081aeeeda109b88a434aed8355d668c216b5d6e66dbec9df5d6bbe6dfd95",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "ja": "DNSChaosは、誤ったDNS応答をシミュレートするために使用されます。例えば、DNSChaosはDNSリクエストを受信した際にエラーを返したり、ランダムなIPアドレスを返したりすることができます。"
      }
    },
    {
      "segment_id": "40f9552a",
      "source_content": "## Check if Chaos DNS Server is deployed",
      "source_content_hash": "eb14a592adb9dbb84ed8b4c00be4b500e3cb2b7e77243b954409410ccc0188f1",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "ja": "## Chaos DNS Serverがデプロイされているか確認"
      }
    },
    {
      "segment_id": "f2c2bdd0",
      "source_content": "Check if Chaos DNS Server is deployed by running the following command:",
      "source_content_hash": "a484029b1628875d73661e5bee3a57ea5db5d052c40a7434d34664f90246edbe",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "ja": "以下のコマンドを実行して、Chaos DNS Serverがデプロイされているか確認します："
      }
    },
    {
      "segment_id": "08021a08",
      "source_content": "```bash\nkubectl get pods -n chaos-mesh -l app.kubernetes.io/component=chaos-dns-server\n```",
      "source_content_hash": "f01fce31feb8e8de2d32ef92920baef54a7c9aa99f124131c20520f07ef768d4",
      "node_type": "code",
      "translatable": false,
      "translations": {
        "ja": "@@untranslatable_placeholder_08021a08"
      }
    },
    {
      "segment_id": "dfe931a2",
      "source_content": "Make sure that the Pod status is `Running`.",
      "source_content_hash": "393b1e22a8e8ce0e5b0db1efcf7e33a31ecc71985967b77d687083f093949a21",
      "node_type": "paragraph",
      "translatable": true,
      "translations": {
        "ja": "Podのステータスが`Running`であることを確認してください。"
      }
    },
    {
      "segment_id": "0037ff70",
      "source_content": "## Notes",
      "source_content_hash": "63e13e87b378d1e85f838ead267db9020c1457b1118a37e0af9fb5f976144f4b",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "ja": "## 注意事項"
      }
    },
    {
      "segment_id": "fc8eadc3",
      "source_content": "1. Currently, DNSChaos only supports record types `A` and `AAAA`.\n\n2. The chaos DNS service runs CoreDNS with the [k8s_dns_chaos](https://github.com/chaos-mesh/k8s_dns_chaos) plugin. If the CoreDNS service in your Kubernetes cluster contains some special configurations, you can edit configMap `dns-server-config` to make the configuration of the chaos DNS service consistent with that of the K8s CoreDNS service using the following command:\n\n   ```bash\n   kubectl edit configmap dns-server-config -n chaos-mesh\n   ```",
      "source_content_hash": "4b76398f1ed0c0feabbd2293ad0a4e5b0e5fc3ad91434f9d90391339b91fc049",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "ja": "1. 現在、DNSChaosはレコードタイプ`A`と`AAAA`のみをサポートしています。\n\n2. chaos DNSサービスは[k8s_dns_chaos](https://github.com/chaos-mesh/k8s_dns_chaos)プラグインを搭載したCoreDNSを実行します。KubernetesクラスターのCoreDNSサービスに特別な設定が含まれている場合は、以下のコマンドを使用してconfigMap `dns-server-config`を編集し、chaos DNSサービスの設定をK8s CoreDNSサービスと一致させることができます：\n\n   ```bash\n   kubectl edit configmap dns-server-config -n chaos-mesh\n   ```"
      }
    },
    {
      "segment_id": "06c0f776",
      "source_content": "## Create experiments using Chaos Dashboard",
      "source_content_hash": "0e6c13931d3c46c241532f93bf2c43261695607133973a006c15d6651045ed71",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "ja": "## Chaos Dashboardを使用した実験の作成"
      }
    },
    {
      "segment_id": "4c077b92",
      "source_content": "1. Open Chaos Dashboard, and click **NEW EXPERIMENT** on the page to create a new experiment:\n\n   ![Create Experiment](./img/create-new-exp.png)\n\n2. In the **Choose a Target** area, choose **DNS FAULT** and select a specific behavior, such as **ERROR**. Then fill out the matching rules.\n\n   ![DNSChaos Experiment](./img/dnschaos-exp.png)\n\n   According to the matching rules configured in the screenshot, the DNS FAULT takes effect for domains including `google.com`, `chaos-mesh.org`, and `github.com`, which means that an error will be returned when a DNS request is sent to these three domains. For details of specific matching rules, refer to the description of the `patterns` field in [Configuration Description](#configuration-description).\n\n3. Fill out the experiment information, and specify the experiment scope and the scheduled experiment duration:\n\n   ![Experiment Information](./img/exp-info.png)\n\n4. Submit the experiment information.",
      "source_content_hash": "8c524c36bcb097bdf6611d3a7a1e0317b6e608a008eb6faf2f370361eb8e5b1a",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "ja": "1. Chaos Dashboardを開き、ページ上の **NEW EXPERIMENT** をクリックして新しい実験を作成します：\n\n   ![実験の作成](./img/create-new-exp.png)\n\n2. **Choose a Target** エリアで、**DNS FAULT** を選択し、**ERROR** などの特定の動作を選択します。その後、マッチングルールを入力します。\n\n   ![DNSChaos実験](./img/dnschaos-exp.png)\n\n   スクリーンショットで設定されたマッチングルールに従い、DNS FAULTは`google.com`、`chaos-mesh.org`、`github.com`を含むドメインに対して有効になります。つまり、これらの3つのドメインにDNSリクエストが送信されるとエラーが返されます。具体的なマッチングルールの詳細については、[設定説明](#configuration-description)の`patterns`フィールドの説明を参照してください。\n\n3. 実験情報を入力し、実験の範囲とスケジュールされた実験期間を指定します：\n\n   ![実験情報](./img/exp-info.png)\n\n4. 実験情報を送信します。"
      }
    },
    {
      "segment_id": "e912d935",
      "source_content": "## Create experiments using the YAML file",
      "source_content_hash": "faa2dfd18ffbf305fc181947e20275b109e0d8b3b79c0d1ec685d272ffea7041",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "ja": "## YAMLファイルを使用した実験の作成"
      }
    },
    {
      "segment_id": "ea0c7bae",
      "source_content": "1. Write the experiment configuration to the `dnschaos.yaml` file:\n\n   ```yaml\n   apiVersion: chaos-mesh.org/v1alpha1\n   kind: DNSChaos\n   metadata:\n     name: dns-chaos-example\n     namespace: chaos-mesh\n   spec:\n     action: random\n     mode: all\n     patterns:\n       - google.com\n       - chaos-mesh.*\n       - github.?om\n     selector:\n       namespaces:\n         - busybox\n   ```\n\n   This configuration can take effect for domains including `google.com`, `chaos-mesh.org`, and `github.com`, which means that an IP address will be returned when a DNS request is sent to these three domains. For specific matching rules, refer to the `patterns` description in [Configuration Description](#configuration-description).\n\n2. After the configuration file is prepared, use `kubectl` to create an experiment:\n\n   ```bash\n   kubectl apply -f dnschaos.yaml\n   ```",
      "source_content_hash": "d1589fdd8e38850a56400205abbebaa66e79743bcf1e8dd101a5f4c2d0889a10",
      "node_type": "list",
      "translatable": true,
      "translations": {
        "ja": "1. 実験設定を`dnschaos.yaml`ファイルに記述します：\n\n   ```yaml\n   apiVersion: chaos-mesh.org/v1alpha1\n   kind: DNSChaos\n   metadata:\n     name: dns-chaos-example\n     namespace: chaos-mesh\n   spec:\n     action: random\n     mode: all\n     patterns:\n       - google.com\n       - chaos-mesh.*\n       - github.?om\n     selector:\n       namespaces:\n         - busybox\n   ```\n\n   この設定は`google.com`、`chaos-mesh.org`、`github.com`を含むドメインに対して有効になります。つまり、これらの3つのドメインにDNSリクエストが送信されるとIPアドレスが返されます。具体的なマッチングルールについては、[設定説明](#configuration-description)の`patterns`の説明を参照してください。\n\n2. 設定ファイルの準備ができたら、`kubectl`を使用して実験を作成します：\n\n   ```bash\n   kubectl apply -f dnschaos.yaml\n   ```"
      }
    },
    {
      "segment_id": "ec8ed2a1",
      "source_content": "### Configuration Description",
      "source_content_hash": "6cad7cd3374f57e00d9cbcebc7f015b5cb1ba15380262183c302174498948f03",
      "node_type": "heading",
      "translatable": true,
      "translations": {
        "ja": "### 設定説明"
      }
    },
    {
      "segment_id": "5f4dd7e7",
      "source_content": "| Parameter | Type | Description | Default value | Required | Example |\n| :-- | :-- | :-- | :-- | :-- | :-- |\n| `action` | string | Defines the behavior of DNS fault. Optional values: `random` or `error`. When the value is `random`, DNS service returns a random IP address; when the value is `error`, DNS service returns an error. | None | Yes | `random` or `error` |\n| `patterns` | String array | Selects a domain template that matches faults. Placeholder `?` and wildcard are supported. `*` | [] | No | `google.com`, `chaos-mesh.org`, `github.com` |\n| `mode` | string | Specifies the mode of the experiment. The mode options include `one` (selecting a random Pod), `all` (selecting all eligible Pods), `fixed` (selecting a specified number of eligible Pods), `fixed-percent` (selecting a specified percentage of Pods from the eligible Pods), and `random-max-percent` (selecting the maximum percentage of Pods from the eligible Pods). | None | Yes | `one` |\n| `value` | string | Provides parameters for the `mode` configuration, depending on `mode`. For example, when `mode` is set to `fixed-percent`, `value` specifies the percentage of Pods. | None | No | `1` |\n| `selector` | struct | Specifies the target Pod. For details, refer to [Define the Scope of Chaos Experiments](./define-chaos-experiment-scope.md). | None | Yes |  |",
      "source_content_hash": "8901d6781248853d58a1855cd860da2e971b3acc2d7bf69b24a043282b7eab5e",
      "node_type": "table",
      "translatable": false,
      "translations": {
        "ja": "@@untranslatable_placeholder_5f4dd7e7"
      }
    },
    {
      "segment_id": "13f26ba5",
      "source_content": ":::note\n\n- The wildcard in `patterns` configuration must be at the end of string. For example, `chaos-mes*.org.` is an invalid configuration.\n\n- When `patterns` is not configured, faults are injected for all domains.\n\n:::",
      "source_content_hash": "9b4448da7eca3b8bc8b7809d354dab81a79371b6ee4e5e03e4f3b9a73ddf3d7a",
      "node_type": "containerDirective",
      "translatable": true,
      "translations": {
        "ja": ":::note\n\n- `patterns`設定のワイルドカードは文字列の末尾にある必要があります。例えば、`chaos-mes*.org.`は無効な設定です。\n\n- `patterns`が設定されていない場合、すべてのドメインに対して障害が注入されます。\n\n:::"
      }
    }
  ],
  "target_i18n_subpath": "docusaurus-plugin-content-docs/current/simulate-dns-chaos-on-kubernetes.md",
  "last_updated_timestamp": "2025-06-05T17:50:36.690217+00:00",
  "schema_version": "1.0",
  "translated_versions": {
    "ja": "51596012257f124b087c49337decc2bac64f4264cb7fbe3936f39c0d1fac15a7"
  }
}
---
slug: /chaos-mesh-2.0-to-a-chaos-engineering-ecology
title: 'Chaos Mesh 2.0: To a Chaos Engineering Ecology'
authors: chaos-mesh
image: /img/blog/chaos-mesh-2.0-ga.png
tags: [Chaos Mesh, Chaos Engineering, Announcement]
---

![Chaos Mesh 2.0: カオスエンジニアリングの生態系へ](/img/blog/chaos-mesh-2.0-ga.png)

2021年7月23日、Chaos Mesh 2.0が一般公開されました！これはエキサイティングなリリースであり、私たちが構築を目指すカオスエンジニアリングの生態系に向けた重要なマイルストーンです。

<!--truncate-->

カオスエンジニアリングをより簡単にすることは、常にChaos Meshの揺るぎない目標であり、このリリースはその重要な一歩です。約1年にわたる継続的な努力の結果、主に3つの分野で大幅な改善を行いました：使いやすさ、ネイティブな実験オーケストレーション＆スケジューリング、そして故障注入タイプの豊富さです。

## 使いやすさ

私たちはChaos Meshの使いやすさを向上させることに尽力しており、その重要な手段がChaos Dashboardです。これはユーザーがカオス実験をオーケストレーションするためのWebインターフェースです。Chaos Mesh 2.0では、以下の方法でChaos Dashboardを改善し、カオス実験の複雑さをさらに簡素化しました：

- AWSChaosとGCPChaosの作成、表示、更新をサポートし、クラウド環境でのカオス実験がKubernetesと同様の体験を提供できるようになりました；
- 各実験のより詳細な記録を表示できるようになり、可視性がさらに向上しました。

![Chaos Mesh 2.0 - 実験スケジューリング](/img/blog/chaos-mesh-scheduling-2.0.png)

## ネイティブな実験オーケストレーション＆スケジューリング

カオス実験を行う際、単一の実験では完全なテストシナリオをシミュレートするには不十分なことが多く、実験を手動で開始または停止することは面倒で危険な作業です。以前は、[ArgoとChaos Meshを組み合わせる](https://chaos-mesh.org/blog/building_automated_testing_framework)ことで、ワークフローとして自動的に故障を注入していました。しかし、Argoワークフローは宣言的なカオス実験を記述する最良の方法ではないことに気づき、別のワークフローエンジンを開発することにしました。Chaos Mesh 2.0では、ネイティブのWorkflowをサポートし、複数の実験を直列または並列に実行できるようになりました。さらに、通知やヘルスチェックを組み込むことで、より複雑な実験シナリオをシミュレートすることも可能です。

![Chaos Mesh 2.0 - ワークフロー](/img/blog/chaos-mesh-workflow-2.0.png)

以前のバージョンでは、`cron`と`duration`フィールドを使用して定期的に実行されるカオス実験を定義していました。しかし、この方法では動作を適切に記述できないことにすぐに気づきました。例えば、単一の実行が実行サイクルよりも長くなる場合があります。この定義は機能しますが、期待される動作の研究には適していません。私たちはCronJobを参考に、Scheduleという新しいカスタムオブジェクトをChaos Meshに導入しました。これにより、複数の実験を同時に実行できるかどうかなど、定期的に実行されるタスクにより明確なプロパティを追加し、動作を制限できるようになりました。

![Chaos Mesh 2.0 - スケジュール](/img/blog/chaos-dashboard-schedule-2.0.png)

## より豊富な故障注入タイプ

Chaos Meshはすでにシステムレベルの故障注入タイプをサポートしており、AWSChaosやGCPChaosなどのクラウド環境への故障注入も可能です。2.0からは、JVMChaosとHTTPChaosの導入により、アプリケーション層へのカオス注入も可能になりました。

### JVMChaos

JavaやKotlinなどのJVM言語は業界で広く使用されています。JVMChaosは、JVMバイトコードの強化やJava Agentなどの方法で簡単にシミュレートできます。現在、JVMChaosは[chaosblade-exec-jvm](https://github.com/chaosblade-io/chaosblade-exec-jvm)を使用しており、メソッド遅延、指定された戻り値、OOM、カスタム例外のスローなど、さまざまなアプリケーションレベルの故障タイプの注入をサポートしています。詳細については、[JVMアプリケーションの故障をシミュレートする](https://chaos-mesh.org/docs/simulate-jvm-application-chaos)を参照してください。

### HTTPChaos

HTTPChaosはバージョン2.0で新たにサポートされたChaosタイプです。HTTPサービスのリクエストとレスポンスをサーバーサイドでハイジャックしたり、リンクの切断、遅延注入、Header/Bodyの改変が可能です。HTTPを通信プロトコルとして使用するすべてのシナリオに適しています。詳細は[HTTP障害のシミュレート](https://chaos-mesh.org/docs/simulate-http-chaos-on-kubernetes)をご参照ください。

## Chaosd: 物理ノード向けの障害注入ツール

Chaos MeshはKubernetes向けに設計されています。物理マシン環境向けには[Chaosd](https://github.com/chaos-mesh/chaosd)を提供しています。これはChaos Meshの主要コンポーネントであるchaos-daemonから進化したもので、物理マシンの特性に基づいた特定のカオス実験を追加しました。現在、Chaosdはプロセスキル、ネットワーク、JVM、負荷、ディスクなど、物理マシンに対する複数の障害注入タイプをサポートしています。

## 今後の展望

Chaos Meshは現在も活発に開発が続いており、より強力な機能が計画されています：

- 実行時におけるJVMChaosの注入を実現し、JVMChaosのコストを削減して使いやすくする
- カスタムカオス実験を構築するためのプラグインメカニズムを導入しつつ、スケジューリング機能を維持する

さらに、カオス実験が多くのシナリオで再利用可能であることに気付き、カスタマイズされた実験をテンプレート化できるプラットフォームの立ち上げを計画しています。これにより、ユーザーは特定のカオス実験だけでなく、さまざまなシナリオ向けのWorkflowも共有・再利用できるようになります。

## ぜひお試しください！

:::note

2022-10-24: https://www.oreilly.com/online-learning/leveraging-katacoda-technology.html および [#356](https://github.com/chaos-mesh/website/pull/356) のため、インタラクティブチュートリアルは一時的に利用できません。

:::

ブラウザから`Chaos Mesh 2.0インタラクティブシナリオ`をお試しください！インストールや設定は不要で、完全な開発環境が事前に構成されています。詳細については[Chaos Meshドキュメント](https://chaos-mesh.org/docs)をご覧ください。

## 感謝の言葉

すべての[Chaos Meshコントリビューター](https://github.com/chaos-mesh/chaos-mesh/graphs/contributors)の皆様に感謝申し上げます。皆様の努力なしにはChaos Meshが1.0から2.0へ進化することはできませんでした！

Chaos Meshに興味があり、改善に協力したい方は、ぜひ[Slackチャンネル](https://slack.cncf.io/)に参加するか、[GitHubリポジトリ](https://github.com/chaos-mesh/chaos-mesh)にプルリクエストやイシューを投稿してください。Chaos Meshは皆様の参加とフィードバックを心待ちにしています！
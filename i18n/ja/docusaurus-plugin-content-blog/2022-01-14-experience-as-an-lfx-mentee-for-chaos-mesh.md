---
slug: /experience-as-a-chaos-mesh-lfx-mentee
title: 'Experience as an LFX Mentee for Chaos Mesh'
authors: chunxuzhang
image: /img/blog/lfx-mentee-experience-banner.png
tags: [Chaos Mesh, Chaos Engineering, LFX Mentorship, Monitoring Metrics]
---

![Chaos MeshのLFXメンティーとしての経験](/img/blog/lfx-mentee-experience-banner.png)

私は南京大学でソフトウェアエンジニアリングを専攻する大学院生です。研究テーマはDevOpsで、カオスエンジニアリングやオブザーバビリティと密接に関連しています。オープンソースコミュニティに参加し、Kubernetesへの理解を深め、インフラ周りの日常業務を体験するために、2021年秋のCNCF LFXメンタープログラムに応募し、[Chaos Mesh](https://github.com/chaos-mesh/chaos-mesh)プロジェクトに参加しました。

<!--truncate-->

## 応募プロセス

8月末にビジネス系のインターンシップを終えたところでした。予想通り、ビジネス関連の仕事にはあまり興味が湧かないと気づきました。しかし、インフラ技術に対する強い情熱は常に持ち続けていました。偶然、CNCF LFXメンタープログラムでChaos Meshプロジェクトを見つけ、これは長年夢見ていたオープンソースプロジェクトに携わる絶好の機会だと考えました。技術スタックも合っていたため、締切直前に履歴書を提出しました。

3日後、メンターから面接のメールが届きました。面接課題として、Prometheusメトリクスを公開しGrafanaダッシュボードに表示するmini-node-exporterを作成するという小さな課題が出されました。さらに、このmini-node-exporterと設定済みのPrometheus、GrafanaダッシュボードをKubernetesプラットフォームにデプロイする必要がありました。設計と実装プロセスは非常にスムーズに進みました。唯一の難点は、GrafanaダッシュボードをKubernetesデプロイ用の設定YAMLとして記述することでしたが、ドキュメントを調べたり実験を重ねることで最終的に解決しました。

8月30日、無事に面接を通過したという吉報を受け取りました。メンターとの1対1ミーティングでは、私のKubernetesやその他の技術への習熟度、主なタスク、いくつかの重要なタイムラインについて簡単に話し合いました。また、大学院の研究室プロジェクトのプレッシャーがメンタープログラムの進捗に影響を与える可能性や、メトリクスの設計ガイドラインに関する懸念点も提起しました。メンターは私の事情をよく理解し、懸念点に対処してくれました。

## プロジェクト進行

私が応募したプロジェクトは[Monitoring Metrics about Chaos Mesh](https://mentorship.lfx.linuxfoundation.org/project/8db683b0-0273-4a83-9ed9-4c33ee2cfcf0)というタイトルで、Chaos Meshシステムのオブザーバビリティを向上させるためにメトリクスを収集しGrafanaダッシュボードを提供することを目的としていました。

プロジェクト開始後2週間は、Chaos Meshの業務プロセスとコード詳細に慣れる期間でした。その後2週間で、すべてのメトリクスと収集方法を整理する設計ドキュメントの作成に取り掛かりました。この期間中、メトリクス設計ガイドラインを研究し、メンターとミーティングを行って提案内容の詳細やコードロジックの一部を理解しました。

これらのメトリクスの大半は比較的簡単に収集でき、データベースオブジェクトやk8sオブジェクトへの単純なクエリ、あるいは簡単なカウント操作のみで済みました。しかし、特殊なメトリクスの中には収集が難しいものもありました。例えば、対応するコンテナのネットワーク名前空間内でコマンドを実行してデータを問い合わせたり、3つの異なるコンテナランタイムを通じてデーモン配下の全コンテナを問い合わせたり、gRPCクライアントとサーバー間の通信データを収集したりする必要があるケースです。

これらのタスクは私にとって未知の領域でした。そのため、時折メンターに技術サポートを求める必要がありましたが、メンターは常に迅速に対応してくれました。メンターのこの分野における深い知識と豊富な経験には大変感銘を受けました。メンターの指導のもと、最終的に設計の[RFC](https://github.com/chaos-mesh/rfcs/pull/23)ドキュメントをまとめることができました。その後、作業を追跡するために[トラッキングイシュー](https://github.com/chaos-mesh/chaos-mesh/issues/2397)を作成しました。

![トラッキングイシュー](/img/blog/lfx-mentee-experience-tracking-issue.png)

しかし、その後のコーディング作業では様々な問題に直面しました。振り返ってみると、多くの問題は事前に解決できたはずだと気づきました。そこで、以下にいくつかのアドバイスをまとめました。

**批判的に考え続けること**。提案を受け入れた際、私は各メトリクスに対する解決策を即座に提案しましたが、基本的な疑問を見落としていました：これらのメトリクスは本当に必要か？より良い解決策はないか？こうした基本的な疑問は提案段階で解決されるべきでしたが、実際には設計実装フェーズまで持ち越されました。例えば、RFCを提出した際、メンターやレビュアーから指摘を受け、一部のメトリクスがcontroller-runtimeライブラリに既に実装されていることを知りました。BPM関連のメトリクスに取り組んでいた時も、同様の指摘をレビュアーから受けました。その時になって初めて、自分がこの点を全く考慮していなかったことに気づいたのです。

![BPMメトリクスに関するコメント](/img/blog/lfx-mentee-experience-thinking-critically.png)

**継続的なコミュニケーション**。効果的なコミュニケーションの取り方は、このメンターシップにおいて非常に重要な課題でした。コミュニケーションに関して多くの教訓を得ましたが、最も印象的だったのは、アドバイスを求める前に選択肢を提示することの重要性です。助けを求めなければならない時は、相手が参照できるよういくつかの選択肢を提供しましょう。それらの選択肢が有効でなくても、そこにはあなた自身の思考が反映されています。ですから、徹底的に考え抜いた上でまだアイデアが浮かばない場合を除き、相手を質問の渦中に巻き込まないようにしましょう。

**オープンソースを理解する**。これは私にとって初めての実践的なオープンソース体験でした。企業での仕事とは大きく異なる点がいくつかあります：

1. 情報の同期方法。企業では頻繁に顔を合わせて会議を行いますが、オープンソースコミュニティとのコミュニケーションのほとんどはSlackチャンネル、GitHubのissue、プルリクエストに集中しています。そのため、作業内容を記録し、他のメンバーが状況を把握できるようにする必要があります。最初の数週間、私は以前の習慣に基づいてオンラインのR&Dドキュメントを維持していました。後に、GitHub上でKanbanやissueを設定した方が良いことに気づき、異なるプラットフォームを使用することでメンターに追加のコミュニケーションコストを強いることを避けました。

   ![オンラインR&Dドキュメント](/img/blog/lfx-mentee-experience-rd-doc.png)

2. より優れた厳格な自動テスト。ビジネス企業では、自動テストは静的コード解析、ユニットテスト、簡単なスモークテストのみを含み、より厳格なテストは手動で行われます。しかし、オープンソースプロジェクトでは、自動コードパイプラインに統合テスト、エンドツーエンドテスト、ライセンスチェックなど、より詳細で完全なテストケースが含まれています。提出されたコードの品質とセキュリティは、この段階で最初にチェックされます。

3. コードレビュー。多くの人があなたのコードレビューに参加し、レビューは長期間に及ぶ可能性があります。企業の仕事とは異なり、オープンソースコミュニティには専任のレビュアーはいません。ユーザー、メンテナー、または他のコミュニティメンバーが、割り当てられたり自発的にこの作業を行います。これがレビュー期間が長引く一因となっているかもしれません。

## プロジェクト終了後

この12週間は素晴らしい経験でした。Kubernetes、CRD、およびオブザーバビリティについてより深く理解することができました。また、コード構造の改善方法、Linuxの基礎知識、コンテナ技術に関する知識がまだ不足していることも実感しました。学ぶべきことはまだたくさんあります！

同時に、大学院の研究室プロジェクトの予期せぬプレッシャーのため、メンターシップに専念する時間が十分に取れませんでした。Grafana部分の設計さえ、期間内に完了することができませんでした。必ずフォローアップし、このプロジェクトを成功裏に完了させ、真の結論を出したいと考えています。

メンターの[@STRRL](https://github.com/STRRL)に感謝の意を表したいと思います。インターンシップ期間中、Git操作、循環依存の解決策、CRI-Oのランタイムインターフェースの検索など、プロジェクトで多くの問題に直面しました。メンターの忍耐強い指導がなければ、これらの不慣れな技術的課題を完了することは困難でした。また、Chaos Meshのメンテナーにはコードレビューをしていただき、CNCF LFXメンターシッププロジェクトには、オープンソースコミュニティに参加したい私たち全員に素晴らしいプラットフォームを提供していただきました。

![メンターのLGTM](/img/blog/lfx-mentee-experience-mentors-lgtm.png)

最後に、オープンソースコミュニティの一員になりたいと考えているすべての学生が、LFXメンターシップで最初の一歩を踏み出せることを願っています！